services:
  - name: todo-backend
    type: web
    runtime: image
    image:
      url: ghcr.io/mikebg95/todo-project/todo-backend:latest
    plan: free
    region: frankfurt
    envVars:
      - { key: PORT, value: 8082 }
      - { key: SPRING_PROFILES_ACTIVE, value: prod }
      - { key: SPRING_DATA_MONGODB_URI, sync: false }
    healthCheckPath: /actuator/health

  - name: todo-frontend
    type: web
    runtime: image
    image:
      url: ghcr.io/mikebg95/todo-project/todo-frontend:latest
    plan: free
    region: frankfurt
    envVars:
      - { key: PORT, value: 80 }
      # After backend deploys, set this to the backendâ€™s public URL (with trailing slash) and redeploy frontend
      - { key: BACKEND_URL, value: https://REPLACE_WITH_BACKEND_HOST/ }
    healthCheckPath: /
