services:
  # ðŸ§© BACKEND (Spring Boot)
  - name: todo-backend
    type: web
    runtime: image
    image:
      url: ghcr.io/mikebg95/todo-project/todo-backend:dev
    plan: free
    region: frankfurt
    startCommand: "java -Dserver.port=$PORT -jar /app/app.jar"
    envVars:
      - { key: SPRING_PROFILES_ACTIVE, value: dev }
      - { key: SPRING_DATA_MONGODB_URI, sync: false }  # set in Render dashboard
    # Uncomment if you have actuator:
    # healthCheckPath: /actuator/health


  # ðŸ§© FRONTEND (Nginx serving built files)
  - name: todo-frontend
    type: web
    runtime: image
    image:
      url: ghcr.io/mikebg95/todo-project/todo-frontend:dev
    plan: free
    region: frankfurt
    envVars:
      # INTERNAL (private networking)
      - key: BACKEND_HOSTPORT
        fromService:
          name: todo-backend
          type: web
          property: hostport
    healthCheckPath: /
