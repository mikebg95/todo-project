services:
  # ---------- Backend (private HTTP service) ----------
  - type: privateService
    name: todo-backend
    env: docker
    image:
      url: ghcr.io/mikebg95/todo-project/todo-backend:latest
    plan: starter
    region: frankfurt
    autoDeploy: yes
    healthCheckPath: /actuator/health
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod
      - key: SPRING_DATA_MONGODB_URI
        sync: false   # add value manually in Render dashboard later

  # ---------- Frontend (public web service) ----------
  - type: web
    name: todo-frontend
    env: docker
    image:
      url: ghcr.io/mikebg95/todo-project/todo-frontend:latest
    plan: starter
    region: frankfurt
    autoDeploy: yes
    healthCheckPath: /
    envVars:
      # Used by nginx.conf for API proxy
      - key: BACKEND_URL
        value: http://todo-backend:8082/