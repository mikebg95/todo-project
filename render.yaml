services:
  - name: todo-backend
    type: web
    runtime: image
    image:
      url: ghcr.io/mikebg95/todo-project/todo-backend:dev
    plan: free
    region: frankfurt
    startCommand: "java -Dserver.port=$PORT -jar /app/app.jar"
    envVars:
      - { key: SPRING_PROFILES_ACTIVE, value: dev }
      - { key: SPRING_DATA_MONGODB_URI, sync: false }
    # healthCheckPath: /actuator/health

  - name: todo-frontend
    type: web
    runtime: image
    image:
      url: ghcr.io/mikebg95/todo-project/todo-frontend:dev
    plan: free
    region: frankfurt
    envVars:
      - key: BACKEND_HOSTPORT
        fromService:
          name: todo-backend
          type: web
          property: hostport
    healthCheckPath: /
