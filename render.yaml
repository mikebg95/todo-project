services:
  # BACKEND (Spring Boot)
  - name: todo-backend
    type: web
    runtime: image
    image:
      url: ghcr.io/mikebg95/todo-project/todo-backend:dev
    plan: free
    region: frankfurt
    envVars:
      - { key: SPRING_PROFILES_ACTIVE, value: dev }
      - { key: SPRING_DATA_MONGODB_URI, sync: false }
    # If you use Actuator, you can add:
    # healthCheckPath: /actuator/health

  # FRONTEND (Nginx serving built files)
  - name: todo-frontend
    type: web
    runtime: image
    image:
      url: ghcr.io/mikebg95/todo-project/todo-frontend:dev
    plan: free
    region: frankfurt
    envVars:
      # Use the backend's PUBLIC URL (works regardless of private DNS)
      - key: BACKEND_URL
        value: https://todo-backend-w132.onrender.com/
    healthCheckPath: /
